<!DOCTYPE html>
<html lang="en">
<head>
	<title></title>
	<meta charset="UTF-8">
	<script type="text/javascript" src="/usr/lib/tuquito/tuquito-software-manager/data/templates/jquery.js"></script>
	<script type="text/javascript" src="/usr/lib/tuquito/tuquito-software-manager/data/templates/jquery-ui.custom.min.js"></script>
	<script type="text/javascript" src="/usr/lib/tuquito/tuquito-software-manager/data/templates/jquery.ui.stars.min.js"></script>
	<link rel="stylesheet" type="text/css" href="/usr/lib/tuquito/tuquito-software-manager/data/templates/jquery.ui.stars.min.css">
	<script type="text/javascript">
	document.onmousedown = new Function("return false");
	document.onselectstart = new Function ("return false");
	if (window.sidebar) {
	    document.onmousedown = new Function("return false");
	    document.onclick = new Function("return true");
	}
	// Accepts a url and a callback function to run.
	function requestCrossDomain( site, callback ) {
		// If no url was passed, exit.
		if ( !site ) {
			alert('No site was passed.');
			return false;
		}
		// Take the provided url, and add it to a YQL query. Make sure you encode it!
		var yql = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from html where url="' + site + '"') + '&format=xml&callback=?';
		// Request that YSQL string, and run a callback function.
		// Pass a defined function to prevent cache-busting.
		$.getJSON( yql, cbFunc );
		function cbFunc(data) {
		// If we have something to work with...
		if ( data.results[0] ) {
			// Strip out all script tags, for security reasons.
			// BE VERY CAREFUL. This helps, but we should do more.
			data = data.results[0].replace(/<script[^>]*>[\s\S]*?<\/script>/gi, '');
			data = data.replace(/<body>[\s\S]*?<p>/gi, '');
			data = data.replace(/<\/p>[\s\S]*?<\/body>/gi, '');
			// If the user passed a callback, and it
			// is a function, call it, and send through the data var.
			if ( typeof callback === 'function') {
				callback(data);
			}
		}
		// Else, Maybe we requested a site that doesn't exist, and nothing returned.
		else throw new Error('Nothing returned from getJSON.');
		}
	}
	$(document).ready(function() {
		if ("$action" == "install"){ //no esta intalado
			$('#install').show();
			$('#remove').hide();
			$('#update').hide();
		} else if ("$action" == "update") { //esta instalado pero hay actualizacion
			$('#install').hide();
			$('#remove').show();
			$('#update').show();
		} else { // esta instalado
			$('#install').hide();
			$('#remove').show();
			$('#update').hide();
		}

		requestCrossDomain('http://tuquito.org.ar/software/show.php?id=$pkgname', function(results) {
		   value = results.split('|');
		   score = parseInt(value[0]);
		   rates = parseInt(value[1]);
		   if (rates != 0)
		   	curval = score/rates;
		   else
		   	curval = 0;
		   $('#loading').hide();
		   $("#ratings").children().not(":radio").hide();
		   $caption = $("<span>");
		   $("#ratings").stars({
			oneVoteOnly: true,
			showTitles: true,
			captionEl: $caption,
			callback: function(ui, type, value)
			{
				$.post("http://www.tuquito.org.ar/software/votar.php", {rating:value, id:"$pkgname"});
				$("#rates").text(rates+1);
			}
		   }).append('<br>(<span id="rates">' + rates + '</span> $votes) ');
		   $caption.appendTo("#ratings");
		   $("#ratings").stars("select", parseInt(curval)).fadeIn();
		});
	});
	function changeTitle(title) {
	    document.title = title;
	}
	function button_button_clicked(data) {
	    $('.btn').fadeOut();
	    changeTitle("call:on_button_clicked:" + data);
	}
	function action_screenshot_clicked() {
	    changeTitle("call:on_screenshot_clicked");
	    changeTitle("nop");
	}
	function action_website_clicked() {
	    changeTitle("call:on_website_clicked");
	    changeTitle("nop");
	}
</script>

<style type="text/css">
* { -khtml-user-drag: none; }
html {
	background: url('/usr/lib/tuquito/tuquito-software-manager/data/bg.png') repeat-x top;
	font-family: "Ubuntu", Lucida Sans Unicode, Arial, Helvetica, Sans-Serif;
	height: 100%;
	color: #4B4B4B;
	padding: 0;
	margin: 0;
	text-shadow: white 1px 1px 0px;
}

body {
	background: url('/usr/lib/tuquito/tuquito-software-manager/data/clouds.png') top right no-repeat;
	position: absolute;
	width: 100%;
	height: 100%;
	top: 0;
	margin: 0;
}

h1 {
	font-size: 25px;
	margin: 18px 0 0.1em 90px;
	padding-left: 10px;
}

h2 {
	font-size: 80%;
	margin: 0 0 0.3em 90px;
	font-weight: normal;
}

#icon {
	width: 72px;
	height: 72px;
	z-index: -1;
	position: absolute;
	-webkit-background-clip: border-box;
	-webkit-background-origin: border-box;
	left: 10px;
	top: 10px;
}

.btn {
	display:block;
	height: 42px;
	width: 122px;
	font-size: 14px;
	font-style: normal;
	font-weight: bold;
	white-space: nowrap;
	padding: 0px !important;
	line-height: 43px;
	text-decoration: none !important;
	color: #F5FAF0 !important;
	text-align: center;
	float: right;
	opacity: 0.7;
	position: fixed;
	right: 10px;
	top: 10px;
	text-shadow: black 1px 1px 0px;
}

.btn:hover { opacity: 1; }

#install {
	background: url('/usr/lib/tuquito/tuquito-software-manager/data/install.png') top left no-repeat;
}

#remove {
	background: url('/usr/lib/tuquito/tuquito-software-manager/data/uninstall.png') top left no-repeat;
}

#update {
	background: url('/usr/lib/tuquito/tuquito-software-manager/data/update.png') top left no-repeat;
	top: 70px;
}

a { color: #294f88; }

a:hover { text-decoration: none; }

#content {
	top: 100px;
	position: absolute;
	padding-left: 10px;
}

.data {
	text-decoration: none;
	padding: 0;
	font-weight: normal;
	font-style: normal;
	letter-spacing: normal;
	word-spacing: normal;
	font-variant: normal;
	font-variant: normal;
	text-transform: none;
	text-align: left;
	text-indent: 0;
	line-height: inherit;
	font-size: 12px;
}

#description {
	padding: 10px;
	font-size: 13px;
}

#loading {
	width: 120px;
	text-align: center;
	height: 30px;
}

#ratings { display: none; }
</style>
</head>
<body>
	<a href="javascript:button_button_clicked('install')" class="btn" id="install">$install_button_label</a>
	<a href="javascript:button_button_clicked('remove')" class="btn" id="remove">$remove_button_label</a>
	<a href="javascript:button_button_clicked('update')" class="btn" id="update">$update_button_label</a>
	<img id="icon" src="$icon">
	<h1 tabindex="0">$appname</h1>
	<h2 tabindex="0">$summary<br>$website</h2>
	<div id="content">
		<div class="data">
			<b>$txtVersion</b> $version ($pkgname)<br>
			<b>$txtSize</b> $size<br>
			<div id="loading">
				<img src="/usr/lib/tuquito/tuquito-software-manager/data/loading.gif"><br>$loading_txt
			</div>
			<form id="ratings">
				<input type="radio" name="rate" value="1" title="$vbad" id="rate1"> <label for="rate1">$vbad</label>
				<input type="radio" name="rate" value="2" title="$ntbad" id="rate2"> <label for="rate2">$ntbad</label>
				<input type="radio" name="rate" value="3" title="$average" id="rate3"> <label for="rate3">$average</label>
				<input type="radio" name="rate" value="4" title="$good" id="rate4"> <label for="rate4">$good</label>
				<input type="radio" name="rate" value="5" title="$excellent" id="rate5"> <label for="rate5">$excellent</label>
				<input type="submit" value="Rate it!">
			</form>
		</div>
		<p id="description">$description</p>
	</div>
</body>
</html>
